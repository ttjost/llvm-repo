/* Length of input.     */
#define X_DIM 100

const short i_data[X_DIM*8] = {
    -19360, 20792, -13446, 28862, -13834, -4038, 28855, 9475, -17858, -22675, -13013, -4021, -15837, -5811, -27857,
    3928, 6920, -20217, -19214, -12047, 25103, -28048, 26456, -22282, -20584, 21816, -4321, -8012, 8968, -28833,
    -25533, 30842, -6453, -3353, -26716, 3692, -3941, 17098, 26341, -8554, 513, 9006, 19094, 12356, -21220,
    14550, -9580, -15216, 24992, 19420, -31569, 6715, -14815, 24989, -11890, -25920, -7791, 499, -27697, 1190,
    -9977, 7081, 25970, -22763, 17857, 15403, 6007, 17068, 26476, 3709, -2108, -23663, -18782, 21870, 4428,
    18633, -25677, -10996, -13714, -21304, 19879, -8358, -31334, 843, 7555, 30784, 10298, -32666, -20021, 17602,
    -21554, 31960, -2488, -18060, 7513, 2982, -15349, 15405, -20741, -11034, -31311, 11514, -16417, 18907, 23527,
    2646, -426, -31166, -31184, 9367, 2116, 29419, 5093, -27478, 11706, -630, 8573, 27138, 14820, 31182,
    9742, 17357, 26149, 32691, 5396, -13976, -9344, -9452, 22640, -18923, 26169, 24707, -6478, 27627, 16315,
    -17572, -1638, 16909, 4796, -30441, 10459, 542, -25186, 21982, -4829, 18676, -26856, 20063, -12457, -16757,
    -18155, -17694, -14301, 22843, 5596, -26723, -27727, 8237, 7024, -8633, -585, 8459, -5831, 21738, 27063,
    -29450, -9245, -2563, 7042, 12477, 29573, 17841, 1021, -17334, -2042, 10379, 5671, -29345, 32700, 3890,
    26714, -3710, 15445, -29814, -23088, 4918, 12794, -23808, -27544, 1643, -17231, 29223, -19798, -22474, -30718,
    -2684, 12808, 17860, -8995, 2981, -11930, 16012, 27066, 1144, 23516, 5572, -5887, 20953, -12358, -22763,
    18861, 11628, 29132, 29329, 15915, 18348, 20702, 13284, 21895, -11196, -638, 14537, 714, -30819, 31248,
    10944, 13981, 22967, -22803, 16381, 28465, 8764, -20720, 1955, 25186, 25042, 14530, 17713, -23014, -13136,
    24228, -28868, -1293, 27252, -19210, -23202, 7456, 24370, -8427, -20114, 16269, -20016, 31045, -6159, -27325,
    -23664, 23217, 15311, -29423, 27885, 29615, 6473, -23704, 29611, -13241, 23594, -4474, 20009, 26357, -2756,
    -14121, 10233, 2990, -3331, 15767, 23474, 16160, -7790, 7099, 22020, -5570, -18948, -11503, 5644, 30203,
    -18295, 32678, -8472, 24404, 8844, -14489, -4466, -30828, 25424, 28170, 19929, -15149, 16457, -15570, 3556,
    30399, 17548, 20160, -31077, 9118, 13184, 24481, 27278, 24979, 29397, 24709, -15352, -28641, -24651, 5918,
    12128, 9706, -15558, 12664, -6514, -26941, -9697, -14938, 29184, 5605, -23623, -22626, 4782, -18308, -5081,
    -18079, 14700, -17305, -14904, -26274, -24706, -2242, 26093, 21272, -11151, -20075, -26417, -2554, 21800, 29314,
    195, 14009, -32716, 32604, -27477, 32324, -1175, 5061, 4527, 3031, 24237, -27157, 21549, 3245, 14355,
    19210, -13331, -12760, -17113, 20532, 32665, 28217, -17013, -9388, 21355, -20987, -21822, 2160, -30936, -13627,
    -14005, -18643, -24756, -32531, -8463, 15512, 11654, -25200, -3487, -4829, 11366, -15870, -4099, -15636, -7596,
    15806, 18415, -23483, 32708, 8842, -9857, 3696, -4953, -2344, -16471, 10410, 31012, -21905, -11542, -31894,
    25991, -20150, -2982, 2026, 30073, 26816, 30207, -9242, 625, 10980, 13407, 15779, 16746, -19410, 13654,
    -25550, -20522, -16550, -8150, 28661, -9262, -1136, 8924, -26782, -1126, -16188, 6336, 15366, 2110, 9823,
    1615, -31795, 20373, 24606, -16836, -28032, -20110, -31430, -15420, -24690, -1003, 9673, -16822, 9230, 7140,
    21092, 4642, 25860, 4699, -1528, -19796, -8734, -6081, -15807, -32347, 20306, 3865, -17020, -12359, 30258,
    -6686, -23588, -11685, -20768, 21754, 29129, 8921, 2230, -19105, -28316, -25942, -29224, 30490, -3641, 8458,
    -15572, 15100, -20309, 15816, -23383, 21386, 14929, -31394, -24107, -7883, 934, 12866, 24200, -562, 17057,
    32635, 15349, -21704, 18672, -26506, -4630, 31070, 25810, 12825, -24490, 5991, 27718, 8472, 28940, 17448,
    22117, -32376, 16838, -11814, -30964, 17329, 9835, -20212, -20291, 12839, -3180, 14042, 28870, -15077, -20148,
    4703, 2467, 22254, -2537, -23193, -8288, -29178, 28213, -19351, -25662, 4069, 4903, -24141, 6375, -11913,
    -10382, -22553, 32556, -26454, -13662, -14427, 12686, -31932, -1647, 23689, 29139, -22800, -28951, -29352, -8534,
    7833, -2074, 2933, 12305, 6394, 4448, -10855, -10762, -17291, -24312, -3646, 23841, -3036, -24847, 21100,
    -16816, 31278, 4946, 23294, -1117, -19621, -29559, -18553, -20422, 12265, 29027, 31657, 30236, -6753, -19558,
    -17195, 18010, 30499, -22882, 7096, 14195, 7304, -360, -3852, 15866, 299, 15275, 4371, -11402, 10942,
    1404, 23480, -22648, 15781, 15092, -30186, -16557, -19840, -17852, -3930, -22761, 20744, 9513, 10260, -26081,
    1054, 9585, -11911, -15139, 23329, -2627, -5681, 1362, 19583, 12935, 24737, -12877, 3470, 14182, -6654,
    3401, 5020, -29552, 9151, 17304, -28092, 10400, -10793, 8643, 2819, -30054, 30251, 24110, -15862, -4053,
    28529, -24987, 11349, 11316, 2926, -25796, -21765, -7799, -28572, -7370, 10184, 9717, 16840, -8406, 26376,
    -11903, 14392, -733, 8869, -523, 17579, 9608, 17012, 31391, 21225, -8580, -14901, 14418, -194, -15993,
    12886, -3663, 21354, 10101, -25558, -27731, -8485, 11902, -25830, 10827, -25059, 32422, -16055, 21930, 26001,
    28774, 26368, -29884, -15524, 31116, -8254, -22668, -29534, 1119, 27804, -27849, -30220, 5382, 32704, 566,
    -2298, 24873, 9556, -29437, -13915, -16936, -23161, -21597, -3097, 1964, -19482, 21580, 5539, -5845, -16404,
    17007, 20771, 9072, 15071, 10743, 14104, 15627, -6439, 23251, -563, -17627, -31964, -26446, 30623, 18664,
    27083, 11021, 31916, 28957, -3475, 26986, -17461, -12778, -20908, 18397, 9915, -11315, -11835, -22574, 28062,
    -26547, 24217, 28938, 15783, 15952, -7156, -18717, 14098, -6615, -6188, 28123, -12716, 18660, 19573, 30038,
    -29548, 25003, 18643, -1633, 25433, -13974, -15096, 29228, 1923, -22346, 12407, -16347, -30849, 25578, 9505,
    12583, -28490, 26003, 27703, 27204, 6213, -21747, 14319, 32590, 23283, -2195, -22886, -17835, 26719, -12127,
    -7434, -10387, -21127, -21802, 30144
};

// Seed 1
const short lp_filt[8] = {
    -10893, -25384, 3695, -1646, -13060, -18192, -3611, -31267
};

// Seed 2
const short hp_filt[8] = {
    29241, -17928, 17808, 24343, -15382, 24269, 28252, 25422
};


/* ======================================================================== */
/*  TEXAS INSTRUMENTS, INC.                                                 */
/*                                                                          */
/*  IMGLIB  DSP Image/Video Processing Library                              */
/*                                                                          */
/*  This library contains proprietary intellectual property of Texas        */
/*  Instruments, Inc.  The library and its source code are protected by     */
/*  various copyrights, and portions may also be protected by patents or    */
/*  other legal protections.                                                */
/*                                                                          */
/*  This software is licensed for use with Texas Instruments TMS320         */
/*  family DSPs.  This license was provided to you prior to installing      */
/*  the software.  You may review this license by consulting the file       */
/*  TI_license.PDF which accompanies the files in this library.             */
/* ------------------------------------------------------------------------ */
/*          Copyright (C) 2002 Texas Instruments, Incorporated.             */
/*                          All Rights Reserved.                            */
/* ======================================================================== */


/* ======================================================================== */
/*                                                                          */
/*  NAME                                                                    */
/*      IMG_wave_horz                                                       */
/*                                                                          */
/*  REVISION DATE                                                           */
/*      15-Oct-2000                                                         */
/*                                                                          */
/*  USAGE                                                                   */
/*      This routine is C-callable and can be called as:                    */
/*                                                                          */
/*      i_data  = input row of data                                         */
/*      lp_filt = Low-pass quadrature mirror filter                         */
/*      hp_filt = High-pass quadrature mirror filter                        */
/*      o_data  = output row of detailed/reference decimated outputs        */
/*      x_dim   = width of the input row                                    */
/*                                                                          */
/*  DESCRIPTION                                                             */
/*      This kernel performs a 1D Periodic Orthogonal Wavelet               */
/*      decomposition.  This also performs athe row decomposition in a      */
/*      2D wavelet transform.  An in put signal x[n] is first low pass      */
/*      and high pass filterd and decimated by two.  This results in a      */
/*      reference signal r1[n] which is the decimated output obtained       */
/*      by dropping the odd samples of the low pass filtered output and     */
/*      a detail signal d[n] obtained by dropping the odd samples of        */
/*      the high-pass output.  A circular convolution algorithm is          */
/*      implemented and hence the wavelet transform is periodic.  The       */
/*      reference signal and the detail signal are half the size of the     */
/*      original signal.  The reference signal may then be iterated         */
/*      again to perform another scale of multi-resolution analysis.        */
/*                                                                          */
/*  BIBLIOGRAPHY                                                            */
/*      A Wavelet Tour of Signal Processing Stephane' Mallat. Academic      */
/*      Press                                                               */
/*                                                                          */
/* ------------------------------------------------------------------------ */
/*            Copyright (c) 2002 Texas Instruments, Incorporated.           */
/*                           All Rights Reserved.                           */
/* ======================================================================== */

void IMG_wave_horz_c
(
    const short *i_data,    /* Row of input pixels  */
    const short *lp_filt,   /* Low-pass QMF filter  */
    const short *hp_filt,   /* High-pass QMF filter */
    short       *o_data,    /* Row of output data   */
    int                   x_dim      /* Length of input.     */
)
{
    int i, j;

    for (i = 0; i < x_dim; i += 2)
    {
        int lp_sum = 1 << 14;

        for (j = 0; j < 8; j++)
            lp_sum += i_data[(i + j) % x_dim] * lp_filt[j];

        o_data[i >> 1] = lp_sum >> 15;
    }

    for (i = 0; i < x_dim; i += 2)
    {
        int hp_sum = 1 << 14;

        for (j = 0; j < 8; j++)
            hp_sum += i_data[(i + x_dim - 6 + j) % x_dim] * hp_filt[7 - j];

        o_data[(i + x_dim) >> 1] = hp_sum >> 15;
    }
}

int main() {

    short       o_data[X_DIM];    /* Row of output data   */
    int                   x_dim  = X_DIM;    /* Length of input.     */

IMG_wave_horz_c
(
    i_data,    /* Row of input pixels  */
    lp_filt,   /* Low-pass QMF filter  */
    hp_filt,   /* High-pass QMF filter */
    o_data,    /* Row of output data   */
    x_dim      /* Length of input.     */
);

	return 0;
}

/* ======================================================================== */
/*  End of file:  img_wave_horz.c                                           */
/* ------------------------------------------------------------------------ */
/*            Copyright (c) 2002 Texas Instruments, Incorporated.           */
/*                           All Rights Reserved.                           */
/* ======================================================================== */
